/***************************************Copyright(c)************************************************
****************************************************************************************************
***** 文    件 :Dev_Adc.c
***** 设    计 :sevenblock
***** 描    述 :
***** 版    本 :V1.0
***** 时    间 :2017-05-03
***** 备    注 :
****************************************************************************************************
***************************************************************************************************/
#define Dev_Adc_D
#include "..\block\app\App_Macro.h"

#define DEV_ADC_EN			29

/*
****************************************************************************************************
** 名    称 ：Dev_Adc_Init()
** 功    能 ：
** 入口参数 ：无
** 出口参数 ：无
** 返    回 ：
** 备    注 ：
****************************************************************************************************
*/
void Dev_Adc_Init(void)
{
	GPIO_BitSet(GPIOA, DEV_ADC_EN);
	GPIO_Init(GPIOA, DEV_ADC_EN, OUTPUT);

	AOSS_ADCInit(ADC_BVD, FALSE);
}

/*
****************************************************************************************************
** 名    称 ：Dev_Adc_Test()
** 功    能 ：
** 入口参数 ：无
** 出口参数 ：无
** 返    回 ：
** 备    注 ：
****************************************************************************************************
*/
void Dev_Adc_Test(void)
{
	UINT8 nADVal;
	double dTV;

	DDEBUG("\n**************Run ADC test************\n");
	
	AOSS_ADCTransfer();
	
	nADVal = AOSS_ADCGetData();
	
	AOSS_ADCAd2Tv(ADC_BVD, nADVal, &dTV);
	
	DDEBUG("Input voltage AD value is %d, voltage is %f mV\n", nADVal, dTV);	
}

/****************************************End Of File************************************************
***************************************************************************************************/

